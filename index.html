<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>食物碳足迹计算器</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #2c974b, #1e7e34);
            color: white;
            padding: 25px 30px;
            text-align: center;
        }
        
        h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 16px;
            opacity: 0.9;
        }
        
        .content {
            padding: 25px 30px;
        }
        
        .intro {
            margin-bottom: 25px;
            padding: 15px;
            background-color: #e8f5e9;
            border-radius: 8px;
            border-left: 4px solid #2c974b;
        }
        
        .calculator {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .input-section {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 10px;
        }
        
        .food-select, .amount-input, .frequency-select {
            flex: 1;
            min-width: 150px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #444;
        }
        
        select, input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        select:focus, input:focus {
            outline: none;
            border-color: #2c974b;
            box-shadow: 0 0 0 2px rgba(44, 151, 75, 0.2);
        }
        
        .add-btn {
            background-color: #2c974b;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 12px 20px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
            align-self: flex-end;
            margin-top: 10px;
        }
        
        .add-btn:hover {
            background-color: #248b3f;
        }
        
        .food-list {
            margin-top: 20px;
        }
        
        .food-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #2c974b;
        }
        
        .food-info {
            flex: 1;
        }
        
        .food-name {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .food-details {
            font-size: 14px;
            color: #666;
        }
        
        .remove-btn {
            background: none;
            border: none;
            color: #dc3545;
            cursor: pointer;
            font-size: 18px;
            padding: 5px;
        }
        
        .results {
            margin-top: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 8px;
            text-align: center;
        }
        
        .result-title {
            font-size: 20px;
            margin-bottom: 15px;
            color: #2c974b;
        }
        
        .result-value {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 10px;
            color: #1a1a1a;
        }
        
        .result-equivalent {
            font-size: 18px;
            color: #555;
            margin-bottom: 20px;
        }
        
        .explanation {
            font-size: 14px;
            color: #666;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #ddd;
        }
        
        .reset-btn {
            background-color: #6c757d;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 12px 25px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 15px;
        }
        
        .reset-btn:hover {
            background-color: #5a6268;
        }
        
        .impact-scale {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            padding: 10px;
            background: #f0f0f0;
            border-radius: 6px;
        }
        
        .impact-level {
            text-align: center;
            flex: 1;
            padding: 5px;
        }
        
        .impact-label {
            font-size: 12px;
            color: #666;
        }
        
        .impact-bar {
            height: 8px;
            background: #e0e0e0;
            margin: 5px 0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .impact-fill {
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .low-impact .impact-fill {
            background: #4CAF50;
            width: 33%;
        }
        
        .medium-impact .impact-fill {
            background: #FFC107;
            width: 66%;
        }
        
        .high-impact .impact-fill {
            background: #F44336;
            width: 100%;
        }
        
        @media (max-width: 600px) {
            .input-section {
                flex-direction: column;
            }
            
            .food-select, .amount-input, .frequency-select {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>食物碳足迹计算器</h1>
            <p class="subtitle">计算您食物消费的年度温室气体排放量</p>
        </header>
        
        <div class="content">
            <div class="intro">
                <p>通过选择您常吃的食物、消费量和频率，计算一年中产生的温室气体排放量，以及相当于驾驶汽车行驶的公里数。</p>
            </div>
            
            <div class="calculator">
                <div class="input-section">
                    <div class="food-select">
                        <label for="food">选择食物</label>
                        <select id="food">
                            <option value="shrimp">人工养殖虾</option>
                            <option value="fish">人工养殖鱼</option>
                            <option value="coffee">咖啡</option>
                            <option value="beer">啤酒</option>
                            <option value="potatoes">土豆</option>
                            <option value="nuts">坚果</option>
                            <option value="almond_milk">杏仁奶</option>
                            <option value="oat_milk">燕麦奶</option>
                            <option value="milk">牛奶/羊奶</option>
                            <option value="soy_milk">豆奶</option>
                            <option value="chocolate_milk">巧克力牛奶</option>
                            <option value="dark_chocolate">黑巧克力</option>
                            <option value="pasta">意大利面</option>
                            <option value="citrus">桔子橙子类水果</option>
                            <option value="berries">葡萄和浆果</option>
                            <option value="avocado">牛油果</option>
                            <option value="beef">牛肉</option>
                            <option value="eggs">鸡蛋</option>
                            <option value="rice">米饭</option>
                            <option value="lamb">羊肉</option>
                            <option value="tea">茶</option>
                            <option value="wine">葡萄酒</option>
                            <option value="apple">苹果</option>
                            <option value="tomatoes">西红柿</option>
                            <option value="tofu">豆腐</option>
                            <option value="peas">豌豆</option>
                            <option value="pork">猪肉</option>
                            <option value="chicken">鸡肉</option>
                            <option value="banana">香蕉</option>
                            <option value="bread">面包</option>
                            <option value="cereal">麦片</option>
                        </select>
                    </div>
                    
                    <div class="amount-input">
                        <label for="amount">每次消费量 (克)</label>
                        <input type="number" id="amount" min="1" value="100">
                    </div>
                    
                    <div class="frequency-select">
                        <label for="frequency">消费频率</label>
                        <select id="frequency">
                            <option value="365">每天</option>
                            <option value="260">工作日</option>
                            <option value="182">每周3-4次</option>
                            <option value="104">每周2次</option>
                            <option value="52">每周1次</option>
                            <option value="26">每两周1次</option>
                            <option value="12">每月1次</option>
                        </select>
                    </div>
                </div>
                
                <button class="add-btn" id="addFood">添加到列表</button>
                
                <div class="food-list" id="foodList">
                    <!-- 食物列表将在这里动态生成 -->
                </div>
                
                <div class="results" id="results">
                    <div class="result-title">您的年度食物碳足迹</div>
                    <div class="result-value" id="carbonResult">0 公斤 CO₂e</div>
                    <div class="result-equivalent" id="carEquivalent">相当于驾驶汽车 0 公里</div>
                    
                    <div class="impact-scale">
                        <div class="impact-level low-impact">
                            <div class="impact-label">低碳</div>
                            <div class="impact-bar"><div class="impact-fill"></div></div>
                            <div class="impact-value">0-500 kg</div>
                        </div>
                        <div class="impact-level medium-impact">
                            <div class="impact-label">中等</div>
                            <div class="impact-bar"><div class="impact-fill"></div></div>
                            <div class="impact-value">500-1000 kg</div>
                        </div>
                        <div class="impact-level high-impact">
                            <div class="impact-label">高碳</div>
                            <div class="impact-bar"><div class="impact-fill"></div></div>
                            <div class="impact-value">1000+ kg</div>
                        </div>
                    </div>
                    
                    <div class="explanation">
                        <p>* 基于每公斤食物产生的二氧化碳当量(CO₂e)计算，包括生产、运输和加工过程。</p>
                        <p>** 汽车行驶等效值基于平均每公里排放 0.2 公斤 CO₂e 计算。</p>
                    </div>
                    <button class="reset-btn" id="resetBtn">重置计算器</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 食物碳足迹数据 (kg CO₂e per kg of food)
        // 基于科学研究数据，包括生产、运输和加工过程
        const foodData = {
            shrimp: 12.0,           // 人工养殖虾
            fish: 6.1,              // 人工养殖鱼
            coffee: 17.0,           // 咖啡
            beer: 0.6,              // 啤酒
            potatoes: 0.3,          // 土豆
            nuts: 2.3,              // 坚果
            almond_milk: 0.7,       // 杏仁奶
            oat_milk: 0.9,          // 燕麦奶
            milk: 3.2,              // 牛奶/羊奶
            soy_milk: 1.0,          // 豆奶
            chocolate_milk: 3.5,    // 巧克力牛奶
            dark_chocolate: 18.7,   // 黑巧克力
            pasta: 1.5,             // 意大利面
            citrus: 0.5,            // 桔子橙子类水果
            berries: 1.1,           // 葡萄和浆果
            avocado: 2.5,           // 牛油果
            beef: 27.0,             // 牛肉
            eggs: 4.8,              // 鸡蛋
            rice: 4.0,              // 米饭
            lamb: 39.2,             // 羊肉
            tea: 8.5,               // 茶
            wine: 1.8,              // 葡萄酒
            apple: 0.4,             // 苹果
            tomatoes: 1.4,          // 西红柿
            tofu: 3.2,              // 豆腐
            peas: 0.9,              // 豌豆
            pork: 12.1,             // 猪肉
            chicken: 6.9,           // 鸡肉
            banana: 0.7,            // 香蕉
            bread: 1.4,             // 面包
            cereal: 1.3             // 麦片
        };
        
        // 食物名称映射
        const foodNames = {
            shrimp: "人工养殖虾",
            fish: "人工养殖鱼",
            coffee: "咖啡",
            beer: "啤酒",
            potatoes: "土豆",
            nuts: "坚果",
            almond_milk: "杏仁奶",
            oat_milk: "燕麦奶",
            milk: "牛奶/羊奶",
            soy_milk: "豆奶",
            chocolate_milk: "巧克力牛奶",
            dark_chocolate: "黑巧克力",
            pasta: "意大利面",
            citrus: "桔子橙子类水果",
            berries: "葡萄和浆果",
            avocado: "牛油果",
            beef: "牛肉",
            eggs: "鸡蛋",
            rice: "米饭",
            lamb: "羊肉",
            tea: "茶",
            wine: "葡萄酒",
            apple: "苹果",
            tomatoes: "西红柿",
            tofu: "豆腐",
            peas: "豌豆",
            pork: "猪肉",
            chicken: "鸡肉",
            banana: "香蕉",
            bread: "面包",
            cereal: "麦片"
        };
        
        // 频率名称映射
        const frequencyNames = {
            "365": "每天",
            "260": "工作日",
            "182": "每周3-4次",
            "104": "每周2次",
            "52": "每周1次",
            "26": "每两周1次",
            "12": "每月1次"
        };
        
        // 存储用户选择的食物
        let selectedFoods = [];
        
        // DOM 元素
        const foodSelect = document.getElementById('food');
        const amountInput = document.getElementById('amount');
        const frequencySelect = document.getElementById('frequency');
        const addButton = document.getElementById('addFood');
        const foodList = document.getElementById('foodList');
        const carbonResult = document.getElementById('carbonResult');
        const carEquivalent = document.getElementById('carEquivalent');
        const resetButton = document.getElementById('resetBtn');
        
        // 添加食物到列表
        addButton.addEventListener('click', function() {
            const foodId = foodSelect.value;
            const amount = parseInt(amountInput.value);
            const frequency = parseInt(frequencySelect.value);
            
            if (isNaN(amount) || amount <= 0) {
                alert('请输入有效的消费量');
                return;
            }
            
            // 添加到选择列表
            selectedFoods.push({
                id: foodId,
                name: foodNames[foodId],
                amount: amount,
                frequency: frequency
            });
            
            // 更新UI
            updateFoodList();
            calculateCarbonFootprint();
        });
        
        // 更新食物列表显示
        function updateFoodList() {
            foodList.innerHTML = '';
            
            selectedFoods.forEach((food, index) => {
                const foodItem = document.createElement('div');
                foodItem.className = 'food-item';
                
                const annualConsumption = (food.amount * food.frequency / 1000).toFixed(1);
                
                foodItem.innerHTML = `
                    <div class="food-info">
                        <div class="food-name">${food.name}</div>
                        <div class="food-details">每次 ${food.amount}克, ${frequencyNames[food.frequency]}, 年消费 ${annualConsumption}公斤</div>
                    </div>
                    <button class="remove-btn" data-index="${index}">×</button>
                `;
                
                foodList.appendChild(foodItem);
            });
            
            // 添加删除事件监听器
            document.querySelectorAll('.remove-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    selectedFoods.splice(index, 1);
                    updateFoodList();
                    calculateCarbonFootprint();
                });
            });
        }
        
        // 计算碳足迹
        function calculateCarbonFootprint() {
            let totalCarbon = 0;
            
            selectedFoods.forEach(food => {
                // 计算年消费量 (公斤)
                const annualConsumption = (food.amount * food.frequency) / 1000;
                
                // 计算碳足迹 (公斤 CO₂e)
                const carbon = annualConsumption * foodData[food.id];
                totalCarbon += carbon;
            });
            
            // 更新结果显示
            carbonResult.textContent = `${totalCarbon.toFixed(1)} 公斤 CO₂e`;
            
            // 计算汽车行驶等效值 (假设每公里排放0.2公斤 CO₂e)
            const carKm = totalCarbon / 0.2;
            carEquivalent.textContent = `相当于驾驶汽车 ${carKm.toFixed(0)} 公里`;
            
            // 更新影响级别指示器
            updateImpactScale(totalCarbon);
        }
        
        // 更新影响级别指示器
        function updateImpactScale(carbon) {
            const impactLevels = document.querySelectorAll('.impact-level');
            
            impactLevels.forEach(level => {
                level.classList.remove('active');
            });
            
            if (carbon < 500) {
                impactLevels[0].classList.add('active');
            } else if (carbon < 1000) {
                impactLevels[1].classList.add('active');
            } else {
                impactLevels[2].classList.add('active');
            }
        }
        
        // 重置计算器
        resetButton.addEventListener('click', function() {
            selectedFoods = [];
            updateFoodList();
            calculateCarbonFootprint();
        });
        
        // 初始化
        calculateCarbonFootprint();
    </script>
</body>
</html>